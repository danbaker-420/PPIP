<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Commercial Legal - LRC</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Font Awesome for the caret icon in the dropdowns -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- ADDED: Font used in the 3D Text Sprites -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* Procore Custom CSS Variables and Fonts */
        :root {
            --procore-orange: #ff5200;
            --procore-black: #000000;
            --procore-stone: #ece0d6;
            --procore-light-text: #ffffff;
            --procore-dark-text: #333333; /* Used for text on light backgrounds */
            --header-fixed-height: 80px;
            --nav-fixed-height: 50px;
            --carousel-fixed-height: 200px;
            
            /* UPDATED: Visual buffer space below the carousel (24px) */
            --buffer-height: 24px; 
            
            /* UPDATED total height: 80 + 50 + 200 + 24 = 354px */
            --total-fixed-height: 354px; 
        }

        /* Procore Sans Fallback Stack - Cannot load proprietary font directly */
        @font-face {
            font-family: 'Procore Sans';
            src: local('Arial'), local('Helvetica'), sans-serif;
            /* Placeholder: If the font were available, it would be loaded here */
        }
        
        /* ------------------- DESKTOP DASHBOARD LAYOUT (DEFAULT) ------------------- */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Procore Sans', ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
            background-color: #f7f7f7;
            color: var(--procore-dark-text);
            
            /* DESKTOP: FLEX container, fixed height, no external scroll */
            display: flex;
            height: 100vh;
            overflow: hidden; 
        }
        /* ------------------- END DESKTOP FIX ------------------- */


        /* ------------------- DYNAMIC COMMAND PANEL (Sidebar) ------------------- */
        .sidenav {
            height: 100%; 
            width: 320px;
            position: relative; 
            z-index: 1000;
            background-color: var(--procore-orange); 
            overflow-x: hidden;
            overflow-y: auto; 
            border-right: 2px solid #e04400;
            box-shadow: 4px 0 8px rgba(0, 0, 0, 0.1);
            padding: 1.5rem 0.5rem;
            flex-shrink: 0; 
        }

        /* Sidebar Titles/Links/Cards Styles (unchanged) */
        .sidenav-title, .sidenav-title.text-procore-black, .sidenav-title.text-gray-700 { color: var(--procore-light-text) !important; }
        .sidenav-title-script { font-family: 'Procore Sans', sans-serif; font-weight: 700 !important; letter-spacing: 0; text-shadow: none; font-style: normal; }
        .sidenav-title.text-xl { font-size: 1.5rem; padding-bottom: 0px !important; }
        /* UPDATED: Changed text size to text-base */
        .sidenav-title.text-lg { font-weight: 500; font-size: 1rem; }
        .sidenav-section-title { color: var(--procore-light-text); padding: 8px 16px; font-weight: 700; font-size: 1rem; text-transform: uppercase; letter-spacing: 0.05em; margin-top: 1rem; }
        .sidenav a, .dropdown-btn { padding: 10px 16px; text-decoration: none; font-size: 15px; color: var(--procore-light-text); border: none; background: none; width: 100%; cursor: pointer; outline: none; transition: background-color 0.2s, color 0.2s; display: flex; align-items: center; text-align: left; border-radius: 4px; }
        .sidenav a i.ph-magnifying-glass-duotone, .sidenav a i.ph-bell-duotone, .sidenav a i.fa { margin-right: 8px; color: var(--procore-black); }
        .dropdown-btn { display: flex; justify-content: space-between; }
        .sidenav a:hover, .dropdown-btn:hover { background-color: var(--procore-black); color: var(--procore-light-text); }
        .dropdown-btn.active { background-color: var(--procore-black); color: var(--procore-light-text); font-weight: 600; }
        .dropdown-btn.active .fa-caret-down { color: var(--procore-light-text); }
        .dropdown-container { display: none; background-color: rgba(0, 0, 0, 0.2); padding-left: 10px; border-left: 2px solid var(--procore-black); }
        .dropdown-container a { color: var(--procore-light-text); }
        .dropdown-container a:hover { background-color: rgba(255, 255, 255, 0.1); color: var(--procore-light-text); }
        .sidenav-card { background-color: var(--procore-black); color: var(--procore-light-text); padding: 15px; margin: 0 8px 10px 8px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3); transition: background-color 0.2s, transform 0.2s, box-shadow 0.2s; display: flex; align-items: center; border-left: 6px solid var(--procore-orange); }
        .sidenav-card:hover { background-color: #333; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4); }
        .sidenav-card a { padding: 0; background: none; color: var(--procore-light-text); font-weight: 600; font-size: 16px; display: flex; align-items: center; width: 100%; }
        .sidenav-card i.fa { color: var(--procore-orange) !important; margin-right: 12px; width: 32px; text-align: center; transition: color 0.2s; }
        .sidenav-card:hover i.fa { color: var(--procore-orange) !important; }
        .sidenav-title { padding: 0 16px 8px; text-align: left; }


        /* ------------------- MAIN CONTENT LAYOUT ------------------- */
        .main {
            /* DESKTOP: Only this section scrolls internally */
            flex-grow: 1;
            padding: 0;
            min-height: 100vh;
            overflow-y: auto; 
            position: relative; 
            scroll-padding-top: var(--total-fixed-height); 
        }

        /* ------------------- FIXED HEADER & NAV (DESKTOP) ------------------- */
        /* These elements are absolutely positioned *within* the scrolling .main container on desktop */
        #fixed-header { background-color: var(--procore-black); height: var(--header-fixed-height); width: 100%; z-index: 900; position: absolute; top: 0; }
        .header-title-block { display: flex; align-items: center; }
        .header-logo { height: 40px; width: auto; object-fit: contain; margin-right: 1rem; }
        #fixed-nav { background-color: var(--procore-orange); height: var(--nav-fixed-height); width: 100%; z-index: 900; position: absolute; top: var(--header-fixed-height); }
        #carousel-canvas { background-color: var(--procore-stone); position: absolute; top: calc(var(--header-fixed-height) + var(--nav-fixed-height)); 
                           display: block; width: 100%; height: var(--carousel-fixed-height); }
        
        #content-wrapper {
            /* Pushes content below the fixed elements on desktop */
            padding-top: var(--total-fixed-height); 
            padding-bottom: 2rem;
            padding-left: 0;
            padding-right: 0;
        }
        
        #content-wrapper > main > section:first-child { margin-top: 0; }
        
        /* ------------------- RESPONSIVENESS (MOBILE/TABLET) ------------------- */
        @media screen and (max-width: 1024px) {
            /* 1. BODY: Switches to standard scrolling page */
            body {
                display: block;
                height: auto;
                overflow-y: auto;
                /* Remove fixed height */
                min-height: 100vh;
            }
            
            /* 2. SIDEBAR: Becomes full-width and scrolls away */
            .sidenav {
                width: 100%;
                height: auto;
                position: relative; 
                overflow-y: visible;
                padding: 1rem 0;
                box-shadow: none;
                order: 1; /* Ensure sidebar is at the top of the mobile stack */
            }
            
            /* 3. MAIN CONTENT: Switches to natural flow */
            .main {
                overflow-y: visible; /* Content scrolls naturally with page */
                min-height: auto;
                position: relative; /* Must be relative now */
                order: 3; /* Appears after header/carousel/nav/sidebar */
                padding-top: 0 !important;
            }
            
            /* 4. FIXED HEADER/CAROUSEL: Reset positioning to relative flow */
            /* These elements now stack naturally before the sidebar */
            #fixed-header, #fixed-nav, #carousel-canvas {
                position: relative !important;
                top: auto !important;
                height: auto !important; /* Allow height to be determined by content or mobile styles */
            }
            
            /* 5. MOBILE STICKY NAV: Make the Nav Bar sticky for easy access */
            #fixed-nav {
                position: sticky !important;
                top: 0;
                z-index: 1050; /* Above all other content */
            }
            
            /* 6. CONTENT WRAPPER: Remove desktop padding */
            #content-wrapper {
                padding-top: 0 !important;
            }
            
            /* 7. MOBILE VISUAL REFINEMENT */
            /* Ensure the mobile search bar is visible */
            .main > div:first-child.flex.md\:hidden {
                display: flex !important;
            }
            
            /* Hide desktop search bar */
            #fixed-header .hidden.md\:flex {
                display: none !important;
            }
            
            /* Mobile header text size adjustment */
            #fixed-header h1 {
                font-size: 1.25rem;
            }
        }
        /* ------------------- COLLAPSIBLE SECTION STYLING (unchanged) ------------------- */
        .collapsible { cursor: pointer; padding: 1.5rem 2rem; margin-bottom: 0; background-color: var(--procore-stone); color: var(--procore-black); border: 1px solid #ddd; border-bottom: none; transition: background-color 0.2s, color 0.2s; display: flex; justify-content: space-between; align-items: center; font-size: 1.5rem; font-weight: 700; border-radius: 0.5rem 0.5rem 0 0; }
        .collapsible:hover { background-color: #e6dacd; /* Lighter stone */ }
        .content-section { padding: 2rem; background-color: white; border: 1px solid #ddd; border-top: none; border-radius: 0 0 0.5rem 0.5rem; margin-bottom: 2rem; overflow: hidden; transition: max-height 0.3s ease-out, opacity 0.3s ease-out; }
        .back-to-top { display: block; text-align: right; margin-top: 2rem; color: var(--procore-orange); font-weight: 600; text-decoration: none; transition: color 0.2s; }
        .back-to-top:hover { color: #e04400; text-decoration: underline; }
        .team-card { 
            background-color: var(--procore-stone); 
            color: var(--procore-dark-text); 
            padding: 1.5rem; 
            border-radius: 0.75rem; 
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); 
            border-left: 6px solid var(--procore-orange); 
            transition: transform 0.2s; 
            display: flex; 
            flex-direction: column; 
            height: 100%; 
            justify-content: space-between; 
            min-height: 220px; 
        }
        /* NEW: Profile picture styling for IMG tag */
        .profile-pic {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 50%;
            border: 3px solid var(--procore-orange);
            background-color: #fff;
            flex-shrink: 0;
        }
        
        /* NEW: Placeholder style for text initials (if no image loads) */
        .initials-placeholder {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: var(--procore-black);
            color: white;
            font-weight: bold;
            font-size: 1.5rem;
            flex-shrink: 0;
            border: 3px solid var(--procore-orange);
        }
        .team-card-content {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            margin-bottom: 1rem;
        }
        
        #team-content .grid { display: grid; grid-template-rows: auto; align-items: stretch; }
        .team-card:hover { transform: translateY(-5px); box-shadow: 0 8px 15px rgba(0, 0, 0, 0.3); }
        .team-card h3 { color: var(--procore-black); font-weight: 700; font-size: 1.25rem; }
        .team-card p { color: var(--procore-dark-text); }
        .team-card .title { color: var(--procore-orange); font-weight: 600; font-size: 1rem; }
        
        /* NEW: Style for underlining links in the main content area */
        .content-section a {
            text-decoration: underline;
        }

    </style>
</head>
<body>
    <!-- Anchor for basic HTML jump to top -->
    <a id="home"></a>

    <!-- ---------------------------------------------------- -->
    <!-- DYNAMIC COMMAND PANEL (Sidebar) -->
    <!-- ---------------------------------------------------- -->
    <div class="sidenav">
        <!-- ADDED sidenav-title-script CLASS and updated font size/style -->
        <!-- UPDATED: Changed font size to text-base to make it smaller -->
        <p class="sidenav-title sidenav-title-script text-base font-bold pt-4">Legal, Regulatory, & Compliance</p>
        <!-- UPDATED: Changed sidebar text to Commercial Legal -->
        <p class="sidenav-title sidenav-title-script text-base font-normal pb-3 text-gray-700">Commercial Legal</p>
        <hr class="border-t border-black/30 mx-4">
        
        <p class="sidenav-section-title">Quick Links</p>
        <!-- Quick Links as Cards -->
        <div class="space-y-2 px-2">
            <!-- LRC Service Desk Card -->
            <div class="sidenav-card">
                <a href="https://procoretech.atlassian.net/servicedesk/customer/portal/114" target="_blank" rel="noopener noreferrer">
                    <i class="fa fa-ticket fa-2x"></i> 
                    LRC Service Desk
                </a>
            </div>
            <!-- #Ask LRC Card -->
            <div class="sidenav-card">
                <a href="https://procoretech.atlassian.net/servicedesk/customer/portal/114/group/450/create/5003" title="Need more help? Please send us a question!" target="_blank" rel="noopener noreferrer">
                    <i class="fa fa-question-circle fa-2x"></i>
                    #Ask LRC
                </a>
            </div>
            <!-- EthicsPoint Card -->
            <div class="sidenav-card">
                <a href="https://secure.ethicspoint.com/domain/media/en/gui/54631/index.html" target="_blank" rel="noopener noreferrer">
                    <i class="fa fa-shield fa-2x"></i>
                    EthicsPoint
                </a>
            </div>
        </div>

        <hr class="border-t border-black/30 mx-4 my-3">
        
        <p class="sidenav-section-title">Navigation</p>

        <!-- Dynamic Dropdowns for Teams and Resources -->
        
        <button class="dropdown-btn">
            Our Teams
            <i class="fa fa-caret-down"></i>
        </button>
        <div class="dropdown-container">
            <a href="https://procoretech.atlassian.net/wiki/spaces/LRC/pages/2802942567/Corporate+Securities+M+A" target="_blank" rel="noopener noreferrer">Corporate, Securities, & M&A</a>
            <!-- UPDATED: Set Commercial Legal as active link -->
            <a href="https://procoretech.atlassian.net/wiki/spaces/LRC/pages/2802942131/Go-to-Market" class="active bg-black/50 font-semibold" target="_blank" rel="noopener noreferrer">Commercial Legal</a>
            <a href="https://procoretech.atlassian.net/wiki/spaces/LRC/pages/2802909360/Employment+Litigation+Ethics+Compliance" target="_blank" rel="noopener noreferrer">Employment, Litigation, Ethics & Compliance</a>
            <!-- UPDATED URL for Legal Operations -->
            <a href="https://procoretech.atlassian.net/wiki/spaces/LRC/pages/2802942240/Legal+Operations">Legal Operations</a>
            <!-- UPDATED: Removed active class from this link -->
            <a href="https://procoretech.atlassian.net/wiki/spaces/LRC/pages/2802942349/Product+Privacy+Intellectual+Property">Product, Privacy, & IP</a>
        </div>
        
        <button class="dropdown-btn">
            Resources
            <i class="fa fa-caret-down"></i>
        </button>
        <div class="dropdown-container">
            <a href="https://lucid.app/publicSegments/view/81654677-2115-427d-b6d4-36cad294423b/image.png" target="_blank" rel="noopener noreferrer">LRC Organization Chart</a>
            <a href="https://docs.google.com/presentation/d/15LcLLyX67i5Ej-g5i5xcA21BfmniJ9CiUO2LXG43ECds/present?slide=id.g149bcedee81_0_524" target="_blank" rel="noopener noreferrer">LRC's Mission, Vision, & Values</a>
            <a href="https://docs.google.com/presentation/d/12Q7ik36Y7bLKcU1rfpplxXgpFj17SHqFinYi4FUfPQE/present?slide=id.g104d75290de_0_0" target="_blank" rel="noopener noreferrer">LRC Onboarding Deck</a>
            <a href="https://docs.google.com/presentation/d/12Q7ik36Y7bLKcU1rfpplxXgpFj17SHqFinYi4FUfPQE/present?slide=id.g120438a3235_0_0" target="_blank" rel="noopener noreferrer">Self-Service Legal</a>
            <a href="https://docs.google.com/presentation/d/12Q7ik36Y7bLKcU1rfpplxXgpFj17SHqFinYi4FUfPQE/present?slide=id.g10d110e127d_0_35" target="_blank" rel="noopener noreferrer">Our Approach</a>
            <a href="https://docs.google.com/presentation/d/12Q7ik36Y7bLKcU1rfpplxXgpFj17SHqFinYi4FUfPQE/present?slide=id.g1c8883f3b5d_0_508" target="_blank" rel="noopener noreferrer">What We Do</a>
            <a href="https://docs.google.com/presentation/d/12Q7ik36Y7bLKcU1rfpplxXgpFj17SHqFinYi4FUfPQE/present?slide=id.g113d5c194a2_1_15" target="_blank" rel="noopener noreferrer">When to Engage Us</a>
        </div>

        <button class="dropdown-btn">
            CLO Signature Requests
            <i class="fa fa-caret-down"></i>
        </button>
        <div class="dropdown-container">
            <a href="https://docs.google.com/document/d/1f1jm22cwsBUv1C1y_L80zXUzyEqT7iWxXe6q3jg-KPY/edit" target="_blank" rel="noopener noreferrer">Guidance for Submitting CLO Signature Request</a>
            <a href="https://app.smartsheet.com/b/form/5cce753bc4c14df69edcd13596142265" target="_blank" rel="noopener noreferrer">CLO Signature Request Form</a>
        </div>

        <hr class="border-t border-black/30 mx-4 my-3">

        <!-- Miscellaneous Links -->
        <p class="sidenav-section-title">Other Links</p>
        <a href="https://procoretech.atlassian.net/wiki/spaces/LRC/pages/2802943856/LRC+Internal" target="_blank" rel="noopener noreferrer">
            <i class="fa fa-search"></i>LRC Internal
        </a>
        <a href="https://thecore.procore.com/" target="_blank" rel="noopener noreferrer">
            <i class="fa fa-globe"></i>The Core
        </a>
        <a href="https://app.smartsheet.com/b/form/119120d755904b3986665a8566d154cc" target="_blank" rel="noopener noreferrer">
            <i class="fa fa-file-text"></i>Disclosure of Outside Employment
        </a>
        
    </div>

    <!-- ---------------------------------------------------- -->
    <!-- MAIN CONTENT AREA (Scrollable) -->
    <!-- ---------------------------------------------------- -->
    <div class="main">
        
        <!-- HEADER -->
        <header id="fixed-header" class="flex items-center justify-between px-6">
            <!-- LOGO and TITLE BLOCK -->
            <div class="header-title-block">
                <!-- Procore Logo Re-added and Sized -->
                <img 
                    src="https://media.ffycdn.net/us/procore/etmeNi2XofqcS5LaePER.png?width=200" 
                    alt="Procore Logo" 
                    class="header-logo"
                    onerror="this.onerror=null; this.src='https://placehold.co/200x40/ff5200/ffffff?text=PROCORE';"
                >
                <!-- UPDATED: Changed header title to Commercial Legal -->
                <h1 class="text-white text-2xl font-bold tracking-tight text-center md:text-left hidden sm:block">Commercial Legal</h1>
            </div>
            
            <!-- DESKTOP Search Bar (Hidden on Mobile) -->
            <div class="hidden md:flex items-center space-x-2">
                <i class="ph-magnifying-glass-duotone text-white text-xl"></i>
                <input
                    id="desktopSearchInput"
                    type="text"
                    placeholder="Search this page..."
                    class="p-2 rounded-lg bg-white/10 text-white placeholder-white/70 border border-white/20 focus:outline-none focus:border-white transition searchable-input"
                >
            </div>
        </header>

        <!-- FIXED NAVIGATION (Table of Contents) -->
        <nav id="fixed-nav" class="p-2 shadow-lg">
            <ul class="flex flex-wrap gap-2 justify-center md:justify-start">
                <li><a href="#about-us" class="px-4 py-1 rounded-full text-sm font-semibold hover:bg-black/20 transition text-white">About Us</a></li>
                <li><a href="#meet-the-team" class="px-4 py-1 rounded-full text-sm font-semibold hover:bg-black/20 transition text-white">Meet the Team</a></li>
                <li><a href="#resources" class="px-4 py-1 rounded-full text-sm font-semibold hover:bg-black/20 transition text-white">Resources</a></li>
            </ul>
        </nav>

        <!-- CAROUSEL BANNER (Simple 3D Animation Placeholder) -->
        <canvas id="carousel-canvas"></canvas>

        <!-- MODIFIED: P P I P Text Overlay is now centered and changed to COMMERCIAL LEGAL -->
        <div id="legal-ops-text" 
            class="absolute left-1/2 transform -translate-x-1/2 -translate-y-1/2 pointer-events-none" 
            style="z-index: 950; top: calc(var(--header-fixed-height) + var(--nav-fixed-height) + 100px);"> 
            <p class="text-4xl sm:text-5xl md:text-6xl font-bold tracking-widest text-center p-3 rounded-lg bg-white/70 shadow-lg" 
                style="font-family: 'Orbitron', sans-serif; color: var(--procore-black); text-shadow: 1px 1px 2px rgba(0,0,0,0.1); border-left: 4px solid var(--procore-orange); border-right: 4px solid var(--procore-orange);">
                COMMERCIAL LEGAL
            </p>
        </div>
        
        <!-- UPDATED: Dedicated 24px buffer of white space -->
        <div class="h-6" style="background-color: #f7f7f7;"></div> 
        
        <main id="content-wrapper" class="container mx-auto px-4 lg:px-8 py-4">
            
            <!-- MOBILE Search Bar (Visible only on Mobile) -->
            <div class="flex md:hidden items-center space-x-2 mb-6 p-4 rounded-lg bg-white shadow searchable-item">
                <i class="ph-magnifying-glass-duotone text-procore-black text-xl"></i>
                <input
                    id="mobileSearchInput"
                    type="text"
                    placeholder="Search content..."
                    class="p-2 w-full bg-transparent focus:outline-none searchable-input"
                >
            </div>
            
            <!-- SECTION 1: ABOUT US -->
            <section id="about-us">
                <h2 class="collapsible searchable-item" data-target="about-content">
                    About Us
                    <i class="ph-minus-circle-fill text-2xl transition-transform" data-icon></i>
                </h2>
                <div id="about-content" class="content-section">
                    <div class="text-lg space-y-4">
                        <!-- Commercial Legal: Liaison Role (Markdown ** replaced with <b>) -->
                        <p>We partner with <b>Revenue teams</b> to negotiate customer-facing agreements. Our top priority is getting deals closed! Commercial Legal also acts as Revenue’s liaison with the rest of the Legal team, such as Privacy and Product, to solve customer-related issues.</p>
                        
                        <!-- NEWLY ADDED: Commercial Legal's Strategic Scope (Markdown ** replaced with <b>) -->
                        <p>We are <b>Revenue and CS’s strategic legal partner</b> for all things customer-related; we negotiate all customer-related contracts, new logos or renewal, across all segments, stakeholders, and geos globally; develop and deliver enablement and training to improve Revenue and CS operations; and partner on collections and customer bankruptcy issues.</p>

                        <!-- Center of Excellence (COE) Definition (Markdown ** replaced with <b>) -->
                        <h3 class="text-xl font-bold pt-4 pb-2" style="color: var(--procore-orange);">What is Center of Excellence (COE)?</h3>
                        <p><b>COE</b> is a highly-experienced team with a broad range of specialties giving us a unique ability to support any negotiation. COE supports proposal reviews and manages legal escalations to Procore’s Privacy, Product, and Compliance teams. COE is designed to help sales bring deals to closure as quickly as possible by understanding when and how to be flexible, and how to help sales strategize at the agreement stage.</p>
                        
                        <!-- NEWLY ADDED: Procurement Legal & Marketing Support (Markdown ** replaced with <b>) -->
                        <h3 class="text-xl font-bold pt-4 pb-2" style="color: var(--procore-orange);">Procurement & Marketing Support</h3>
                        <p><b>Procurement Legal</b> supports the Procurement organization on all non-sales commercial contracts and buy-side transactions, including all NDAs company-wide. Plus, we support global Marketing efforts and serve as the primary business partner for the Marketing organization globally.</p>
                    </div>
                    <!-- This link uses native HTML hash jump -->
                    <a href="#home" class="back-to-top">Back to Top &uarr;</a>
                </div>
            </section>

            <!-- SECTION 2: MEET THE TEAM (Polished Cards with Fixed Height) -->
            <section id="meet-the-team">
                <h2 class="collapsible searchable-item" data-target="team-content">
                    Meet the Team
                    <i class="ph-minus-circle-fill text-2xl transition-transform" data-icon></i>
                </h2>
                <div id="team-content" class="content-section">
                    <!-- Cards Grid: Ensures tiles are the same size. -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">

                        <!-- Team Member 1: Alice Bisgrove -->
                        <div class="searchable-item team-card">
                            <div class="flex items-center space-x-4 mb-4">
                                <img 
                                    class="profile-pic" 
                                    src="https://media.licdn.com/dms/image/v2/D4D03AQHzBpUkltWM2w/profile-displayphoto-shrink_400_400/profile-displayphoto-shrink_400_400/0/1680824167014?e=1762387200&v=beta&t=ILnRHRIrBo3yBnI4ZRT36MhsO-8A96D4lKnmP__5-cU" 
                                    alt="Alice Bisgrove Profile"
                                    onerror="this.onerror=null; this.classList.add('hidden'); this.nextElementSibling.classList.remove('hidden');"
                                >
                                <div class="initials-placeholder hidden">AB</div>
                                <div>
                                    <h3 class="text-white">Alice Bisgrove</h3>
                                    <p class="text-sm text-white/80"></p>
                                </div>
                            </div>
                            <p class="title">SVP & Deputy General Counsel, Commercial Legal</p>
                        </div>

                        <!-- Team Member 2: Christyne Brennan -->
                        <div class="searchable-item team-card">
                            <div class="flex items-center space-x-4 mb-4">
                                <!-- NO URL PROVIDED - Defaulting to Initials -->
                                <div class="initials-placeholder">CB</div>
                                <div>
                                    <h3 class="text-white">Christyne Brennan</h3>
                                    <p class="text-sm text-white/80"></p>
                                </div>
                            </div>
                            <p class="title">Director & Assistant General Counsel, Public Sector</p>
                        </div>

                        <!-- Team Member 3: Emily See -->
                        <div class="searchable-item team-card">
                            <div class="flex items-center space-x-4 mb-4">
                                <img 
                                    class="profile-pic" 
                                    src="https://media.licdn.com/dms/image/v2/C5603AQE8zBzS0NNQMQ/profile-displayphoto-shrink_800_800/profile-displayphoto-shrink_800_800/0/1517488972621?e=1762387200&v=beta&t=0122UJQ56yup0O2mtKtzR3p1rA9LFINW2I4_OFVZc7g" 
                                    alt="Emily See Profile"
                                    onerror="this.onerror=null; this.classList.add('hidden'); this.nextElementSibling.classList.remove('hidden');"
                                >
                                <div class="initials-placeholder hidden">ES</div>
                                <div>
                                    <h3 class="text-white">Emily See</h3>
                                    <p class="text-sm text-white/80"></p>
                                </div>
                            </div>
                            <p class="title">Director & Assistant General Counsel, Commercial Legal</p>
                        </div>

                        <!-- Team Member 4: Leithia Williams -->
                        <div class="searchable-item team-card">
                            <div class="flex items-center space-x-4 mb-4">
                                <img 
                                    class="profile-pic" 
                                    src="https://media.licdn.com/dms/image/v2/D4E03AQF3C1NHHNZQ0g/profile-displayphoto-shrink_400_400/profile-displayphoto-shrink_400_400/0/1683385378238?e=1762387200&v=beta&t=em_EoQKbprR_aRfe71jXEUZZ4A1RR8Rvu_OCMtgiutQ" 
                                    alt="Leithia Williams Profile"
                                    onerror="this.onerror=null; this.classList.add('hidden'); this.nextElementSibling.classList.remove('hidden');"
                                >
                                <div class="initials-placeholder hidden">LW</div>
                                <div>
                                    <h3 class="text-white">Leithia Williams</h3>
                                    <p class="text-sm text-white/80"></p>
                                </div>
                            </div>
                            <p class="title">Senior Director & Assistant General Counsel, Sales</p>
                        </div>
                        
                        <!-- Team Member 5: Elizabeth Vielbig -->
                        <div class="searchable-item team-card">
                            <div class="flex items-center space-x-4 mb-4">
                                <img 
                                    class="profile-pic" 
                                    src="https://media.licdn.com/dms/image/v2/D5603AQGG-iD9lTz2JA/profile-displayphoto-shrink_400_400/profile-displayphoto-shrink_400_400/0/1668486595014?e=1762387200&v=beta&t=JhusD088kI6VNonftLqU9vLRe2t2yD0JIUxrZ7gks-U" 
                                    alt="Elizabeth Vielbig Profile"
                                    onerror="this.onerror=null; this.classList.add('hidden'); this.nextElementSibling.classList.remove('hidden');"
                                >
                                <div class="initials-placeholder hidden">EV</div>
                                <div>
                                    <h3 class="text-white">Elizabeth Vielbig</h3>
                                    <p class="text-sm text-white/80"></p>
                                </div>
                            </div>
                            <p class="title">Director & Assistant General Counsel, Global Channels and Professional Services</p>
                        </div>
                        
                        <!-- Team Member 6: Pamela Euring -->
                        <div class="searchable-item team-card">
                            <div class="flex items-center space-x-4 mb-4">
                                <img 
                                    class="profile-pic" 
                                    src="https://media.licdn.com/dms/image/v2/D5603AQFsMlQbsY4AEg/profile-displayphoto-shrink_400_400/B56ZYhOkxIH0Ak-/0/1744314197338?e=1762387200&v=beta&t=bZvHFMgYr3fPngDwV0ql2pU0gGvAuM8M9NNSgGNRzGo" 
                                    alt="Pamela Euring Profile"
                                    onerror="this.onerror=null; this.classList.add('hidden'); this.nextElementSibling.classList.remove('hidden');"
                                >
                                <div class="initials-placeholder hidden">PE</div>
                                <div>
                                    <h3 class="text-white">Pamela Euring</h3>
                                    <p class="text-sm text-white/80"></p>
                                </div>
                            </div>
                            <p class="title">Counsel, Public Sector (SLED)</p>
                        </div>
                        
                        <!-- Team Member 7: Kevin Snowden -->
                        <div class="searchable-item team-card">
                            <div class="flex items-center space-x-4 mb-4">
                                <img 
                                    class="profile-pic" 
                                    src="https://media.licdn.com/dms/image/v2/C4E03AQEGAnRGyjquHw/profile-displayphoto-shrink_800_800/profile-displayphoto-shrink_800_800/0/1517751054308?e=1762387200&v=beta&t=yHPaeDRb-46SN9kBcU4TBcMfTjCi2lNvkFSpOrTV9Ww" 
                                    alt="Kevin Snowden Profile"
                                    onerror="this.onerror=null; this.classList.add('hidden'); this.nextElementSibling.classList.remove('hidden');"
                                >
                                <div class="initials-placeholder hidden">KS</div>
                                <div>
                                    <h3 class="text-white">Kevin Snowden</h3>
                                    <p class="text-sm text-white/80"></p>
                                </div>
                            </div>
                            <p class="title">Counsel, Sales</p>
                        </div>
                        
                        <!-- Team Member 8: Matt Hsieh -->
                        <div class="searchable-item team-card">
                            <div class="flex items-center space-x-4 mb-4">
                                <img 
                                    class="profile-pic" 
                                    src="https://media.licdn.com/dms/image/v2/D5603AQES-pd-jB39ZQ/profile-displayphoto-shrink_800_800/profile-displayphoto-shrink_800_800/0/1680815936723?e=1762387200&v=beta&t=EHuOhoXDVUe8tngteGgLbxwEQqa3vYNNjkqW3duZOSM" 
                                    alt="Matt Hsieh Profile"
                                    onerror="this.onerror=null; this.classList.add('hidden'); this.nextElementSibling.classList.remove('hidden');"
                                >
                                <div class="initials-placeholder hidden">MH</div>
                                <div>
                                    <h3 class="text-white">Matt Hsieh</h3>
                                    <p class="text-sm text-white/80"></p>
                                </div>
                            </div>
                            <p class="title">Senior Corporate Counsel, Sales</p>
                        </div>
                        
                        <!-- Team Member 9: Shaina Hyder -->
                        <div class="searchable-item team-card">
                            <div class="flex items-center space-x-4 mb-4">
                                <img 
                                    class="profile-pic" 
                                    src="https://media.licdn.com/dms/image/v2/C5103AQFXlYIcDkZ9fA/profile-displayphoto-shrink_400_400/profile-displayphoto-shrink_400_400/0/1516989394918?e=1762387200&v=beta&t=WRy4X_B5atFPKYMHRuprvgBp8t-sy1AxI6cOkdBRd-c" 
                                    alt="Shaina Hyder Profile"
                                    onerror="this.onerror=null; this.classList.add('hidden'); this.nextElementSibling.classList.remove('hidden');"
                                >
                                <div class="initials-placeholder hidden">SH</div>
                                <div>
                                    <h3 class="text-white">Shaina Hyder</h3>
                                    <p class="text-sm text-white/80"></p>
                                </div>
                            </div>
                            <p class="title">Senior Counsel, Sales</p>
                        </div>
                        
                        <!-- Team Member 10: Ashley Sillay -->
                        <div class="searchable-item team-card">
                            <div class="flex items-center space-x-4 mb-4">
                                <img 
                                    class="profile-pic" 
                                    src="https://media.licdn.com/dms/image/v2/D4E03AQGLGB5Dq54YqA/profile-displayphoto-shrink_400_400/B4EZdbIlXrHcAk-/0/1749580667233?e=1762387200&v=beta&t=nZw16cFdNlnH8F1nITDwl0PKUjwn6yHzgy60GTMKzbE" 
                                    alt="Ashley Sillay Profile"
                                    onerror="this.onerror=null; this.classList.add('hidden'); this.nextElementSibling.classList.remove('hidden');"
                                >
                                <div class="initials-placeholder hidden">AS</div>
                                <div>
                                    <h3 class="text-white">Ashley Sillay</h3>
                                    <p class="text-sm text-white/80"></p>
                                </div>
                            </div>
                            <p class="title">Senior Procurement Legal Manager</p>
                        </div>
                        
                        <!-- Team Member 11: Caleigh Campion -->
                        <div class="searchable-item team-card">
                            <div class="flex items-center space-x-4 mb-4">
                                <img 
                                    class="profile-pic" 
                                    src="https://media.licdn.com/dms/image/v2/D4E03AQGIU0Jb-C9x4A/profile-displayphoto-shrink_400_400/profile-displayphoto-shrink_400_400/0/1682708253518?e=1762387200&v=beta&t=o8IaXCBR9sYIOXyBPBaiP5e3q0BFdoRTFwAytHPeUOA" 
                                    alt="Caleigh Campion Profile"
                                    onerror="this.onerror=null; this.classList.add('hidden'); this.nextElementSibling.classList.remove('hidden');"
                                >
                                <div class="initials-placeholder hidden">CC</div>
                                <div>
                                    <h3 class="text-white">Caleigh Campion</h3>
                                    <p class="text-sm text-white/80"></p>
                                </div>
                            </div>
                            <p class="title">Contracts Negotiator</p>
                        </div>
                        
                        <!-- Team Member 12: Lili Catlett -->
                        <div class="searchable-item team-card">
                            <div class="flex items-center space-x-4 mb-4">
                                <img 
                                    class="profile-pic" 
                                    src="https://media.licdn.com/dms/image/v2/C5603AQEpEmJWXETdZw/profile-displayphoto-shrink_800_800/profile-displayphoto-shrink_800_800/0/1517448458928?e=1762387200&v=beta&t=zjk204doHOwiGY9ef5dMSFsogX7YCmRpbR7ugWjKtjk" 
                                    alt="Lili Catlett Profile"
                                    onerror="this.onerror=null; this.classList.add('hidden'); this.nextElementSibling.classList.remove('hidden');"
                                >
                                <div class="initials-placeholder hidden">LC</div>
                                <div>
                                    <h3 class="text-white">Lili Catlett</h3>
                                    <p class="text-sm text-white/80"></p>
                                </div>
                            </div>
                            <p class="title">Contracts Negotiator</p>
                        </div>
                        
                        <!-- Team Member 13: Lee Sears -->
                        <div class="searchable-item team-card">
                            <div class="flex items-center space-x-4 mb-4">
                                <img 
                                    class="profile-pic" 
                                    src="https://media.licdn.com/dms/image/v2/D4E03AQH3QJohm8MV0g/profile-displayphoto-shrink_800_800/profile-displayphoto-shrink_800_800/0/1727091318501?e=1762387200&v=beta&t=wrO6lVFzwz4d5Y0cFFstjTzjRuOeoKXzysU5FwS4HxE" 
                                    alt="Lee Sears Profile"
                                    onerror="this.onerror=null; this.classList.add('hidden'); this.nextElementSibling.classList.remove('hidden');"
                                >
                                <div class="initials-placeholder hidden">LS</div>
                                <div>
                                    <h3 class="text-white">Lee Sears</h3>
                                    <p class="text-sm text-white/80"></p>
                                </div>
                            </div>
                            <p class="title">Contracts Negotiator</p>
                        </div>
                        
                        <!-- Team Member 14: Rebecca Preston -->
                        <div class="searchable-item team-card">
                            <div class="flex items-center space-x-4 mb-4">
                                <img 
                                    class="profile-pic" 
                                    src="https://media.licdn.com/dms/image/v2/D5603AQGQ5JxdkYmCFw/profile-displayphoto-scale_400_400/B56ZjQX2FhIAAg-/0/1755842569622?e=1762387200&v=beta&t=oBbvkqXzoahKS97nDkSSYMo_cqP8sL6Rrft12aLF8n0" 
                                    alt="Rebecca Preston Profile"
                                    onerror="this.onerror=null; this.classList.add('hidden'); this.nextElementSibling.classList.remove('hidden');"
                                >
                                <div class="initials-placeholder hidden">RP</div>
                                <div>
                                    <h3 class="text-white">Rebecca Preston</h3>
                                    <p class="text-sm text-white/80"></p>
                                </div>
                            </div>
                            <p class="title">Senior Manager, Go-To-Market Legal Effectiveness</p>
                        </div>

                    </div>
                    <a href="#home" class="back-to-top">Back to Top &uarr;</a>
                </div>
            </section>

            <!-- SECTION 4: RESOURCES (Links Added) -->
            <section id="resources">
                <h2 class="collapsible searchable-item" data-target="resources-content">
                    Resources & Policies
                    <i class="ph-minus-circle-fill text-2xl transition-transform" data-icon></i>
                </h2>
                <div id="resources-content" class="content-section">
                    <div class="space-y-6 searchable-item text-lg">
                        <!-- NEW CONTENT START -->
                        
                        <div class="space-y-1">
                            <h3 class="text-xl font-bold" style="color: var(--procore-orange);">IronClad Workflows (SSAs and DPAs)</h3>
                            <p>Use the <a href="#" class="text-gray-800 hover:text-procore-orange font-semibold underline">Ironclad SOP</a> for assistance with SSA and/or DPA workflow issues.</p>
                        </div>

                        <div class="space-y-1">
                            <h3 class="text-xl font-bold" style="color: var(--procore-orange);">Order Forms & Commercial Terms</h3>
                            <p><b>Deal Desk</b> owns the Order Form and commercial issues like pricing, payment terms, special deal structures, etc.</p>
                        </div>
                        
                        <div class="space-y-1">
                            <h3 class="text-xl font-bold" style="color: var(--procore-orange);">How Do I Get an NDA?</h3>
                            <p>You can use <b>Ironclad</b> to generate and get signatures on NDAs without Legal review. Use the <b>Ironclad tile in Okta</b> to log in, then click “Start Workflow”.</p>
                        </div>

                        <!-- NEW CONTENT END -->
                    </div>
                    <a href="#home" class="back-to-top">Back to Top &uarr;</a>
                </div>
            </section>
        </main>
    </div>

    <!-- ---------------------------------------------------- -->
    <!-- JAVASCRIPT LOGIC (Deferred for better performance) -->
    <!-- ---------------------------------------------------- -->
    <!-- Load Phosphor Icons for the plus/minus collapse indicators -->
    <script src="https://unpkg.com/@phosphor-icons/web@2.1.1"></script>
    <!-- Load three.js for the simple carousel animation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script>
        
        let renderer, camera, scene, cubes = [];
        // ADDED: Global variable for the background plane and texture loader
        let backgroundPlane; 
        const textureLoader = new THREE.TextureLoader();
        
        // Primary background will be a light grey solid color (Guaranteed no text).
        const backgroundImage = 'https://placehold.co/1200x200/D0D0D0/D0D0D0'; 
        // Watermark will be a slightly darker grey color (Guaranteed no text) for contrast.
        const patentDiagramUrl = 'https://placehold.co/2000x1000/A0A0A0/A0A0A0'; 
        const mainContent = document.querySelector('.main');

        document.addEventListener('DOMContentLoaded', () => {
            
            // ------------------- SIDEBAR DROPDOWN LOGIC -------------------
            const dropdown = document.getElementsByClassName("dropdown-btn");
            for (let i = 0; i < dropdown.length; i++) {
                dropdown[i].addEventListener("click", function() {
                    this.classList.toggle("active");
                    const dropdownContent = this.nextElementSibling;
                    if (dropdownContent.style.display === "block") {
                        dropdownContent.style.display = "none";
                    } else {
                        dropdownContent.style.display = "block";
                    }
                });
            }

            // ------------------- SPACER HEIGHT CALCULATION -------------------
            const header = document.getElementById('fixed-header');
            const nav = document.getElementById('fixed-nav');
            const carousel = document.getElementById('carousel-canvas');
            const contentWrapper = document.getElementById('content-wrapper');

            function updateContentPadding() {
                if (window.innerWidth > 1024) {
                    // Only apply padding if the fixed elements are active (desktop view)
                    const totalFixedHeaderHeight = header.offsetHeight + nav.offsetHeight + carousel.offsetHeight;
                    
                    // CRITICAL: We also add the buffer height here to ensure the content starts after the buffer element
                    const totalHeightWithBuffer = totalFixedHeaderHeight + parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--buffer-height'));
                    
                    contentWrapper.style.paddingTop = `${totalHeightWithBuffer}px`;
                } else {
                    // On mobile, the main area scrolls naturally, so remove padding
                    contentWrapper.style.paddingTop = '0px'; 
                }
            }

            // Recalculate on load and resize
            updateContentPadding();
            window.addEventListener('resize', updateContentPadding);


            // ------------------- COLLAPSIBLE/ACCORDION LOGIC -------------------
            const collapsibles = document.querySelectorAll('.collapsible');

            collapsibles.forEach(header => {
                const contentId = header.getAttribute('data-target');
                const content = document.getElementById(contentId);
                const icon = header.querySelector('[data-icon]');

                const setContentHeight = (element, state) => {
                    if (state === 'open') {
                        // Use scrollHeight for accurate content measurement
                        element.style.maxHeight = element.scrollHeight + "px";
                        element.style.opacity = '1';
                    } else {
                        element.style.maxHeight = '0';
                        element.style.opacity = '0';
                    }
                };

                // Initial state: Expanded
                header.classList.add('active');
                icon.classList.replace('ph-minus-circle-fill', 'ph-plus-circle-fill');
                content.style.maxHeight = content.scrollHeight + 'px';
                content.style.opacity = '1';

                header.addEventListener('click', () => {
                    const isActive = header.classList.toggle('active');

                    if (isActive) {
                        icon.classList.replace('ph-minus-circle-fill', 'ph-plus-circle-fill');
                        setTimeout(() => setContentHeight(content, 'open'), 10); 
                    } else {
                        icon.classList.replace('ph-minus-circle-fill', 'ph-plus-circle-fill');
                        setContentHeight(content, 'closed');
                    }
                });
                
                window.addEventListener('resize', () => {
                    if (header.classList.contains('active')) {
                        setContentHeight(content, 'open');
                    }
                });
            });

            // ------------------- SEARCH/FILTER LOGIC -------------------
            const desktopSearch = document.getElementById('desktopSearchInput');
            const mobileSearch = document.getElementById('mobileSearchInput');
            const searchableItems = document.querySelectorAll('.searchable-item');
            
            const syncInputs = (sourceInput, targetInput) => {
                targetInput.value = sourceInput.value;
            };

            const filterContent = (query) => {
                const lowerCaseQuery = query.toLowerCase().trim();

                searchableItems.forEach(item => {
                    const textContent = item.textContent.toLowerCase();
                    const isMatch = textContent.includes(lowerCaseQuery);
                    
                    if (isMatch) {
                        if (item.classList.contains('collapsible')) {
                            item.style.display = 'flex';
                        } else if (item.closest('.grid')) {
                            item.style.display = 'flex';
                        } else if (item.tagName === 'LI') {
                            item.style.display = 'list-item';
                        } else {
                            item.style.display = 'block';
                        }
                    } else {
                        item.style.display = 'none';
                    }
                });
            };

            desktopSearch.addEventListener('input', (e) => {
                syncInputs(desktopSearch, mobileSearch);
                filterContent(e.target.value);
            });

            mobileSearch.addEventListener('input', (e) => {
                syncInputs(mobileSearch, desktopSearch);
                filterContent(e.target.value);
            });

            // ------------------- FIX: Prevent Hash Links from Reloading Page and Add Smooth Scroll -------------------
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const hash = this.getAttribute('href');
                    
                    // Check if it's a hash link pointing within the page
                    if (hash.length > 1 || hash === '#home') { 
                        e.preventDefault();
                        
                        // Find the target element
                            const targetElement = document.querySelector(hash);
                        
                        if (targetElement) {
                            // UPDATED: Changed behavior to 'smooth'
                            targetElement.scrollIntoView({
                                behavior: 'smooth', 
                                block: 'start'
                            });
                        }
                    }
                });
            });
            // ------------------- END FIX -------------------


            // ------------------- CAROUSEL (3D Mock) LOGIC - MODIFIED FOR LEGAL OPS BANNER -------------------
            
            const canvas = document.getElementById('carousel-canvas');
            
            function updateCanvasSize() {
                const newWidth = mainContent.clientWidth;
                if (renderer) {
                    renderer.setSize(newWidth, 200);
                    camera.aspect = newWidth / 200;
                    camera.updateProjectionMatrix();
                }
            }

            scene = new THREE.Scene();
            
            // Fallback color if background texture fails
            scene.background = new THREE.Color(getComputedStyle(document.documentElement).getPropertyValue('--procore-stone'));

            camera = new THREE.PerspectiveCamera(75, canvas.clientWidth / 200, 0.1, 1000);
            camera.position.z = 5.5; 

            renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
            
            // NOTE: makeTextSprite function removed as it is no longer used for the 3D cube labels.

            // MODIFIED: Centered three abstract cubes around x=0 (from new Legal Ops code)
            const excitingAreas = [
                { title: "Legal Tech", color: 0xff5200, position: -1.8 }, 
                { title: "Process", color: 0x000000, position: 0.0 }, 
                { title: "Strategy", color: 0xff5200, position: 1.8 }
            ];

            function initCarousel() {
                updateCanvasSize(); 

                const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
                scene.add(ambientLight);
                const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
                directionalLight.position.set(0, 5, 5);
                scene.add(directionalLight);
                
                
                // 1. SET PRIMARY BACKGROUND TO TEXTURE (guaranteed no text, light grey)
                textureLoader.load(backgroundImage, 
                    function(texture) {
                        texture.colorSpace = THREE.SRGBColorSpace;
                        scene.background = texture;
                    },
                    undefined,
                    function(err) {
                        console.error('Error loading background image:', err);
                        // Fallback to solid color if image fails
                        scene.background = new THREE.Color(0xD0D0D0); // Use the target light grey color
                    }
                );
                
                // 2. RE-ADDED WATERMARK LAYER (guaranteed no text, slightly darker grey for subtle contrast)
                textureLoader.load(patentDiagramUrl, 
                    // Callback function when the texture is loaded
                    function(texture) {
                        texture.colorSpace = THREE.SRGBColorSpace;
                        
                        const backgroundGeometry = new THREE.PlaneGeometry(20, 10); // Large plane, 2:1 ratio
                        const backgroundMaterial = new THREE.MeshBasicMaterial({
                            map: texture,
                            transparent: true,
                            opacity: 0.3, // INCREASED OPACITY to 0.3
                            side: THREE.DoubleSide
                        });

                        backgroundPlane = new THREE.Mesh(backgroundGeometry, backgroundMaterial);
                        backgroundPlane.position.z = -1; // Place behind the cubes
                        backgroundPlane.rotation.z = -Math.PI * 0.05; // Slightly angled
                        backgroundPlane.position.y = -1;
                        scene.add(backgroundPlane);
                    },
                    // Placeholder for progress (optional)
                    undefined,
                    // Error handling for texture loading
                    function(err) {
                        console.error('Error loading patent diagram texture:', err);
                    }
                );
                
                // --- END BACKGROUND SETUP ---

                const width = 2.0;
                const height = 3.0;
                const depth = 0.8;
                const segments = 10; 

                excitingAreas.forEach((area) => {
                    
                    const cubeGeometry = new THREE.BoxGeometry(width, height, depth, segments, segments, segments);
                    cubeGeometry.computeVertexNormals(); // Ensure smooth shading
                    
                    const materialColor = area.color === 0x000000 ? 0x222222 : 0xf04400; 
                    const material = new THREE.MeshPhongMaterial({ 
                        color: materialColor, 
                        emissive: materialColor, 
                        emissiveIntensity: 0.2, 
                        shininess: 80, 
                        specular: 0xcccccc 
                    });
                    
                    const cube = new THREE.Mesh(cubeGeometry, material);
                    
                    cube.position.x = area.position;
                    cube.userData.originalX = area.position;
                    cube.userData.rotationSpeed = 0.01;
                    cubes.push(cube);
                    scene.add(cube);
                    
                    // The sprite logic is intentionally removed here, as the text is now an HTML overlay.
                });
            }

            let animationFrameId;

            function animate() {
                animationFrameId = requestAnimationFrame(animate);

                // ADDED: Subtle animation for the background plane
                if (backgroundPlane) {
                    backgroundPlane.rotation.z += 0.0005; // INCREASED SPEED to 0.0005
                    backgroundPlane.position.x = Math.sin(Date.now() * 0.0001) * 0.5;
                }
                
                cubes.forEach(cube => {
                    cube.rotation.y += cube.userData.rotationSpeed * 0.5;
                    cube.rotation.x += cube.userData.rotationSpeed / 4; 
                    cube.rotation.z += cube.userData.rotationSpeed / 8;
                    
                    cube.updateMatrixWorld(true);
                    
                    const scaleFactor = 1 + Math.sin(Date.now() * 0.001 * cube.userData.rotationSpeed * 20) * 0.03;
                    cube.scale.x = cube.scale.y = cube.scale.z = scaleFactor;
                });

                // ADDED Check: Ensure renderer exists before rendering
                if (renderer) {
                    renderer.render(scene, camera);
                }
            }

            function onWindowResize() {
                updateCanvasSize();
                updateContentPadding();
            }

            window.addEventListener('resize', onWindowResize);

            initCarousel();
            animate();

            // ------------------- FINAL INIT -------------------
            updateContentPadding();
        });
    </script>
</body>
</html>
